  - name: install tmux packages
    become: yes
    apt:
      name:
        - tmux
      state: present
      cache_valid_time: 360

#  - name: ensure homedir exists
#    become: yes
#    file:
#      path: " {{ tmux_conf_destination }}"
#      state: directory

#  - name: copy .tmux.conf
#    become: yes
#    template:
#      src: ".tmux.conf"
#      dest: "{{ tmux_conf_destination }}"
#      backup: true

  - name: add tmux-session config to .bashrc
    become: yes
    blockinfile:
      path: "{{ tmux_bashrc_destination }}"
      block: |
        if command -v tmux &> /dev/null && [ -z "$TMUX" ]; then
        tmux attach -t {{ tmux_standardsession_name }} || tmux new -s {{ tmux_standardsession_name }}
        fi
