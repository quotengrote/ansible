---
depends_on:
  - gitleaks
steps:
  ansible-lint:
    image: quay.io/ansible/creator-ee
    commands:
      - ansible-lint --version
      - echo $${VAULTPASS} > ./vault-pass.yml # nach des Secret in Gro√üschreibung
      - cat ./vault-pass.yml #debug
      - ansible-galaxy install -r requirements.yml
      - ansible-lint --force-color --format pep8
    when:
      event:
        exclude:
          - tag
    secrets:
      - source: vault-pass # name des Secrets in Woodpecker/GUI
        target: vaultpass # lower-case Name der variable zur Verwendung in dem CI-File, wird dann so genutzt $${VAULTPASS}
